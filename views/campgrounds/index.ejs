<%- layout('./layouts/boilerplate') %>
<div id="clusterMap" class="mb-3"></div>
    <h1>Campgrounds List</h1>

    <% for (let camp of campgrounds) { %>
        <div class="card my-3">
            <div class="row">
                <div class="col-md-4">
                    <% if(camp.images.length) {%>
                        <img class="img-fluid" src=<%=camp.images[(Math.floor(Math.random()*camp.images.length))].url%>
                        alt="">
                        <% } else { %>
                            <img src="" alt="">
                     <%   } %>  
                    
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title""><%=camp.title%></h5>
                        <h6 class=" card-location">
                            <%=camp.location%>
                                </h6>
                                <p>
                                    <%=camp.description%>
                                </p>
                                <a class="btn btn-primary" href="/campgrounds/<%=camp._id%>">
                                    Details
                                </a>
                    </div>
                </div>
            </div>
        </div>
        <% } %>
            <a href=" /campgrounds/new">Want to make a new campground?</a>

            <script>
                const mapToken = '<%- process.env.MAPBOX_TOKEN %>';
                const campgrounds = {features: <%- JSON.stringify(campgrounds)  %>} 
            </script>

<script src="/js/clusterMap.js"></script>
